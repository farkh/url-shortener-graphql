(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{47:function(e,t,a){e.exports=a(86)},81:function(e,t,a){},82:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),o=a(8),s=a(14),u=a.n(s),m=a(18),i=a(42),E=a.n(i),p={authUser:null,loading:!0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH_USER":return{authUser:t.authUser,loading:!1};default:return e}},d=Object(m.b)({sessionState:f}),h=Object(m.c)(d,Object(m.a)(E.a)),b=(a(70),a(21)),v=a(16),g=a(12),O=a.n(g),S=a(15),U=function(){var e=Object(S.a)(O.a.mark(function e(t){var a,n,r,l,c,o,s;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=localStorage.getItem("token"))){e.next=19;break}return e.prev=2,n={query:'\n                    query {\n                        verifyToken(token: "'.concat(a,'") {\n                            _id\n                            email\n                        }\n                    }\n                ')},e.next=6,u.a.post("/api",n);case 6:return r=e.sent,l=r.data,e.next=10,l.data.verifyToken;case 10:(c=e.sent)?(o=c._id,s=c.email,t({type:"SET_AUTH_USER",authUser:{_id:o,email:s}})):(t({type:"SET_AUTH_USER",authUser:null}),localStorage.removeItem("token")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),t({type:"SET_AUTH_USER",authUser:null});case 17:e.next=20;break;case 19:t({type:"SET_AUTH_USER",authUser:null});case 20:case"end":return e.stop()}},e,null,[[2,14]])}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.b)();Object(n.useEffect)(function(){U(e)})},_=a(7),y=a(87),k=a(88),w=a(89),x=a(103),T=a(90),N=a(91),C=a(92),R=function(){var e=Object(o.b)(),t=Object(n.useState)(!1),a=Object(_.a)(t,2),l=a[0],c=a[1],s=Object(n.useCallback)(function(e){return{authUser:e.sessionState.authUser}},[]),u=Object(o.c)(s).authUser;return r.a.createElement(y.a,{color:"dark",dark:!0,expand:"md"},r.a.createElement(k.a,{href:"/"},"URLShortener"),r.a.createElement(w.a,{onClick:c}),r.a.createElement(x.a,{isOpen:l,navbar:!0},r.a.createElement(T.a,{className:"ml-auto",navbar:!0},r.a.createElement(N.a,null,r.a.createElement(C.a,{href:"/"},"Home")),!u&&r.a.createElement(n.Fragment,null,r.a.createElement(N.a,null,r.a.createElement(C.a,{href:"/login"},"Login")),r.a.createElement(N.a,null,r.a.createElement(C.a,{href:"/signup"},"Sign up"))),u&&r.a.createElement(n.Fragment,null,r.a.createElement(N.a,null,r.a.createElement(C.a,{href:"/urls"},"My URLs")),r.a.createElement(N.a,null,r.a.createElement(C.a,{href:"/",onClick:function(t){t&&t.preventDefault(),e({type:"SET_AUTH_USER",authUser:null}),localStorage.removeItem("token")}},"Logout"))))))},A=(a(81),function(e){var t,a=Object(n.useState)(""),l=Object(_.a)(a,2),c=l[0],o=l[1];return r.a.createElement("div",{className:"create-link"},r.a.createElement("form",{className:"create-link__form",onSubmit:function(t){return e.onSubmit(t,c)}},r.a.createElement("input",{type:"url",className:"g__input",placeholder:"Enter the URL...",value:c,onChange:(t=o,function(e){t(e.target.value)})}),r.a.createElement("input",{type:"submit",className:"g__button g__button--primary",value:"Shorten"})))}),H=function(){var e=Object(n.useState)(""),t=Object(_.a)(e,2),a=t[0],l=t[1],c=function(){var e=Object(S.a)(O.a.mark(function e(t,a){var n,r,c,o;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),n={query:'\n                mutation {\n                    createUrl(longUrl: "'.concat(a,'") {\n                        shortUrl\n                    }\n                }\n            ')},e.prev=2,e.next=5,u.a.post("/api",n);case 5:r=e.sent,(c=r.data).errors?console.error("errors",c.errors[0].message):(o=c.data.createUrl.shortUrl,l(o)),console.log("data",c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("err",e.t0);case 14:console.log("SUbmit",a);case 15:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"home"},r.a.createElement(A,{onSubmit:c}),r.a.createElement("code",{id:"short-url"},a))},L=a(93),I=a(94),z=a(95),P=function(){return r.a.createElement(L.a,null,r.a.createElement(I.a,null,r.a.createElement(z.a,{xs:"12",md:{size:10,offset:1},style:{marginTop:100}},r.a.createElement("img",{src:"https://vignette.wikia.nocookie.net/lucifer/images/6/65/Lucifer_Devil_Form_Season_4_Finale.png/revision/latest?cb=20190508204112",alt:"",style:{maxWidth:"100%"}}))),r.a.createElement(I.a,null,r.a.createElement(z.a,{xs:"12",md:{size:6,offset:3},style:{textAlign:"center",paddingTop:20}},r.a.createElement("h1",null,"404"),r.a.createElement("h3",null,"YOU DO NOT BELONG HERE! GO HOME!"))))},q=a(97),D=a(98),F=a(99),B=a(100),G=a(101),J=a(102),M=a(96),W=(a(82),function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader__content"},r.a.createElement(M.a,{style:{width:"3rem",height:"3rem"},type:"grow"}),r.a.createElement("h1",{className:"loader__title"},"Loading...")))}),Y=Object(v.f)(function(e){var t=Object(o.b)(),a=Object(n.useCallback)(function(e){return{authUser:e.sessionState.authUser}},[]);Object(o.c)(a).authUser&&e.history.push("/");var l=Object(n.useState)(""),c=Object(_.a)(l,2),s=c[0],m=c[1],i=Object(n.useState)(""),E=Object(_.a)(i,2),p=E[0],f=E[1],d=Object(n.useState)(""),h=Object(_.a)(d,2),b=h[0],v=h[1],g=Object(n.useState)(null),U=Object(_.a)(g,2),j=U[0],y=U[1],k=Object(n.useState)(!1),w=Object(_.a)(k,2),x=w[0],T=w[1],N=function(e){return function(t){e(t.target.value)}},C=function(){var a=Object(S.a)(O.a.mark(function a(n){var r,l,c,o,m,i;return O.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n&&n.preventDefault(),T(!0),r={query:'\n                mutation {\n                    createUser(userInput: {\n                        email: "'.concat(s,'"\n                        password: "').concat(p,'"\n                        confirm: "').concat(b,'"\n                    }) {\n                        _id\n                        token\n                        email\n                    }\n                }\n            ')},a.prev=3,a.next=6,u.a.post("/api",r);case 6:if(l=a.sent,!(c=l.data).errors){a.next=13;break}y(c.errors[0].message),T(!1),a.next=23;break;case 13:return a.next=15,c.data.createUser;case 15:o=a.sent,m=o._id,i=o.token,t({type:"SET_AUTH_USER",authUser:{_id:m,email:s}}),y(null),T(!1),localStorage.setItem("token",i),e.history.push("/");case 23:a.next=29;break;case 25:a.prev=25,a.t0=a.catch(3),y(a.t0),T(!1);case 29:case"end":return a.stop()}},a,null,[[3,25]])}));return function(e){return a.apply(this,arguments)}}();return x?r.a.createElement(W,null):r.a.createElement(L.a,{className:"content"},r.a.createElement(I.a,null,r.a.createElement(z.a,{sm:"12",md:{size:6,offset:3}},r.a.createElement("h1",null,"Sign Up"))),r.a.createElement(I.a,null,r.a.createElement(z.a,{sm:"12",md:{size:6,offset:3}},r.a.createElement(q.a,{onSubmit:C},r.a.createElement(D.a,null,r.a.createElement(F.a,{for:"email"},"Email"),r.a.createElement(B.a,{type:"email",name:"email",id:"email",placeholder:"something@example.com",value:s,onChange:N(m)}),r.a.createElement(G.a,null,"Email not found")),r.a.createElement(D.a,null,r.a.createElement(F.a,{for:"password"},"Password"),r.a.createElement(B.a,{type:"password",name:"password",id:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",value:p,onChange:N(f)}),r.a.createElement(G.a,null,"Password incorrect")),r.a.createElement(D.a,null,r.a.createElement(F.a,{for:"password"},"Password"),r.a.createElement(B.a,{type:"password",name:"confirm",id:"confirm",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",value:b,onChange:N(v)}),r.a.createElement(G.a,null,"Passwords must match")),j&&r.a.createElement("p",null,j),r.a.createElement(J.a,{color:"primary"},"Sign Up")))))}),K=Object(v.f)(function(e){var t=Object(o.b)(),a=Object(n.useCallback)(function(e){return{authUser:e.sessionState.authUser}},[]);Object(o.c)(a).authUser&&e.history.push("/");var l=Object(n.useState)(""),c=Object(_.a)(l,2),s=c[0],m=c[1],i=Object(n.useState)(""),E=Object(_.a)(i,2),p=E[0],f=E[1],d=Object(n.useState)(null),h=Object(_.a)(d,2),b=h[0],v=h[1],g=Object(n.useState)(!1),U=Object(_.a)(g,2),j=U[0],y=U[1],k=function(e){return function(t){e(t.target.value)}},w=function(){var a=Object(S.a)(O.a.mark(function a(n){var r,l,c,o,m,i;return O.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n&&n.preventDefault(),y(!0),a.prev=2,r={query:'\n                    query {\n                        login(email: "'.concat(s,'", password: "').concat(p,'") {\n                            _id\n                            token\n                            email\n                        }\n                    }\n                ')},a.next=6,u.a.post("/api",r);case 6:l=a.sent,(c=l.data).errors?(y(!1),v(c.errors[0].message)):(o=c.data.login,m=o._id,i=o.token,t({type:"SET_AUTH_USER",authUser:{_id:m,email:s}}),y(!1),v(null),localStorage.setItem("token",i),e.history.push("/")),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(2),v(a.t0),y(!1);case 15:case"end":return a.stop()}},a,null,[[2,11]])}));return function(e){return a.apply(this,arguments)}}();return j?r.a.createElement(W,null):r.a.createElement(L.a,{className:"content"},r.a.createElement(I.a,null,r.a.createElement(z.a,{sm:"12",md:{size:6,offset:3}},r.a.createElement("h1",null,"Login"))),r.a.createElement(I.a,null,r.a.createElement(z.a,{sm:"12",md:{size:6,offset:3}},r.a.createElement(q.a,{onSubmit:w},r.a.createElement(D.a,null,r.a.createElement(F.a,{for:"email"},"Email"),r.a.createElement(B.a,{type:"email",name:"email",id:"email",placeholder:"something@example.com",value:s,onChange:k(m)}),r.a.createElement(G.a,null,"Email not found")),r.a.createElement(D.a,null,r.a.createElement(F.a,{for:"password"},"Password"),r.a.createElement(B.a,{type:"password",name:"password",id:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",value:p,onChange:k(f)}),r.a.createElement(G.a,null,"Password incorrect")),b&&r.a.createElement("p",null,b),r.a.createElement(J.a,{color:"primary"},"Login")))))}),Q=function(){j();var e=Object(n.useCallback)(function(e){return{loading:e.sessionState.loading}},[]);return Object(o.c)(e).loading?r.a.createElement(W,null):r.a.createElement(b.a,{basename:""},r.a.createElement("div",{className:"App"},r.a.createElement(R,null),r.a.createElement(v.c,null,r.a.createElement(v.a,{exact:!0,path:"/",component:function(){return r.a.createElement(H,null)}}),r.a.createElement(v.a,{exact:!0,path:"/signup",component:function(){return r.a.createElement(Y,null)}}),r.a.createElement(v.a,{exact:!0,path:"/login",component:function(){return r.a.createElement(K,null)}}),r.a.createElement(v.a,{component:P}))))};a(85);!function(){var e=localStorage.getItem("token");u.a.defaults.headers.common.Authorization=e||null}(),c.a.render(r.a.createElement(o.a.Provider,{value:h},r.a.createElement(Q,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.39dc8e0b.chunk.js.map